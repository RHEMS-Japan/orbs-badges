description: >
  Generate badges from the services of RHEMS BADGES.

executor: exe-badges

parameters:
  fingerprint:
    type: string
    description: "Fingerprint of SSH keys that have write permission to the repository. It is recommended that you refer to https://circleci.com/docs/2.0/gh-bb-integration/#creating-a-github-deploy-key and use the deployment key."
  api_token:
    type: string
    default: $BADGE_API_TOKEN
    description: "The API Token of RHEMS BADGES. (Required)"
  organization:
    type: string
    default: $CIRCLE_PROJECT_USERNAME
    description: "organization name (Required)"
  repo:
    type: string
    default: $CIRCLE_PROJECT_REPONAME
    description: "if repo is empty it will use ${CIRCLE_PROJECT_REPONAME} (optional)"
  app:
    type: string
    default: $CIRCLE_PROJECT_REPONAME
    description: "app name (Required)"
  status:
    type: enum
    default: "true"
    description: |
        set status true or false. (Required. "true" or "false")
    enum:
        - "true"
        - "false"
  branch:
    type: string
    default: $CIRCLE_BRANCH
    description: "if branche is empty it will use ${CIRCLE_BRANCH} (optional)"
  color:
    type: string
    default: ""
    description: "you can set color (optional)"
  text:
    type: string
    default: ""
    description: "write text for right side (optional)"

steps:
  - create_badge:
      fingerprint: << parameters.fingerprint >>
      api_token: << parameters.api_token >>
      organization: << parameters.organization >>
      repo: << parameters.repo >>
      app: << parameters.app >>
      branch: << parameters.branch >>
      status: << parameters.status >>
      color: << parameters.color >>
      text: << parameters.text >>
